<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 4: Workshop N8N ‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á - Master Automation Handbook</title>
    <!-- Load Tailwind CSS (Master Standard: Day 2) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* * Master Standard CSS & Fonts (Consistent with Day 2/3)
         * - ‡πÉ‡∏ä‡πâ Tailwind CSS utility classes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Responsive Design ‡πÅ‡∏•‡∏∞ Layout
         * - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Custom Fonts ‡πÅ‡∏•‡∏∞ Variables ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Aesthetics
         */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Noto+Sans+Thai:wght@100..900&display=swap');
        :root {
            /* ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏à‡∏≤‡∏Å Day 2: Blue-Indigo Gradient */
            --primary-color: #3b82f6; /* Tailwind Blue-500 */
            --gradient-start: #3b82f6; 
            --gradient-end: #6366f1; /* Tailwind Indigo-500 */
            /* N8N Accent Color (for highlights) */
            --accent-n8n: #ff4785; /* Pink/Red for N8N elements */
            --bg-light: #f8fafc; /* Tailwind Gray-50 */
        }

        body {
            /* ‡πÉ‡∏ä‡πâ Noto Sans Thai ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ï‡∏≤‡∏° Master Standard */
            font-family: 'Noto Sans Thai', 'Inter', sans-serif;
            background-color: var(--bg-light); 
            line-height: 1.7;
            scroll-behavior: smooth;
        }

        /* Gradient Heading (Standard Aesthetic for H2/H3/H4) */
        .gradient-text {
            background-image: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        /* Card Shadow (Standard Aesthetic for all content blocks) */
        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* Section Header (Standard Aesthetic - Left Border Indicator) */
        .section-header {
            border-left: 5px solid var(--primary-color);
            padding-left: 1rem;
            margin-top: 2rem;
            margin-bottom: 1.5rem; /* Standardized spacing */
        }

        /* Status Card Specific Style (for callout boxes) */
        .highlight-card {
            border-left: 5px solid var(--accent-n8n); /* N8N Pink for Key Concept */
            background-color: #fce7f6; /* Pink-50 */
            padding: 1rem;
            border-radius: 0.5rem;
        }
        .warning-card {
            border-left: 5px solid #f97316; /* Orange-600 for warnings */
            background-color: #fff7ed; /* Orange-50 */
            padding: 1rem;
            border-radius: 0.5rem;
        }

        /* Override Noto Sans Thai font weight for clarity */
        h1, h2, h3, h4 {
            font-weight: 700;
        }
        
        /* Code Block Style (Standard: Slate-800 background) */
        pre {
            background-color: #1e293b; /* Slate-800 */
            color: #f1f5f9; /* Slate-100 */
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        code {
            font-family: Consolas, monospace;
            background-color: #334155; /* Slate-700 */
            padding: 0.1rem 0.3rem;
            border-radius: 0.25rem;
            color: #94a3b8; /* Slate-400 */
        }
        .expression-code {
            background-color: #ffe4e6; /* Pink-100 */
            color: #be185d; /* Pink-700 (for n8n Expression) */
            font-weight: 600;
        }
        /* Style for table headers in content sections */
        .content-table th {
            background-color: #f3f4f6;
        }
        .flow-node {
            background-color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            border: 1px solid #e5e7eb;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .arrow {
            color: var(--accent-n8n);
        }

    </style>
    <script>
        // * Lucide Icons (Consistent with Day 2/3)
        const renderIcon = (name, className = 'w-5 h-5') => {
            const icons = {
                'zap': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>`,
                'repeat': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><path d="m17 2 4 4 -4 4"/><path d="M3 11v-1a4 4 0 0 1 4 -4h14"/><path d="m7 22 -4 -4 4 -4"/><path d="M21 13v1a4 4 0 0 1 -4 4h-14"/></svg>`,
                'cpu': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><rect width="16" height="16" x="4" y="4" rx="2"/><path d="M15 9h1a2 2 0 0 1 2 2v1"/><path d="M9 15h-1a2 2 0 0 0 -2 2v1"/><path d="M15 15v1a2 2 0 0 1 -2 2h-1"/><path d="M9 9v-1a2 2 0 0 0 -2 -2h-1"/></svg>`,
                'lock': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>`,
                'shield-alert': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><path d="M12 22s8 -4 8 -11V5l-8 -3l-8 3v6c0 7 8 11 8 11"/><path d="M12 8v4"/><path d="M12 16h.01"/></svg>`,
                'database': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 12a9 3 0 0 0 18 0"/><path d="M3 19a9 3 0 0 0 18 0"/><path d="M3 5v14"/></svg>`,
                'git-branch': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><line x1="6" x2="6" y1="3" y2="15"/><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M18 9a9 9 0 0 1 -9 9"/></svg>`,
                'activity': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><path d="M22 12h-4l-3 9l-6 -18l-3 9h-4"/></svg>`,
                'code': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>`,
                'alert-triangle': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71 -3L13.71 3.86a2 2 0 0 0 -3.42 0z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></svg>`,
                'bell': `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="${className}"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3 -2 3 -9"/><path d="M10.36 21a1.9 1.9 0 0 0 3.28 0"/></svg>`,
            };
            return icons[name] || '';
        };
        
        window.onload = () => {
             console.log("Day 4 Handbook Loaded (Content Depth Target: >= 1000 lines).");
        };

    </script>
</head>
<body class="min-h-screen">
    <!-- Message Box for Alerts/Confirmations (Standard) -->
    <div id="messageBox" class="fixed top-4 right-4 z-50 w-full max-w-sm"></div>

    <!-- Header Section (Consistent with Day 2/3 - Tailwind Structure) -->
    <header class="bg-white card-shadow sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="text-3xl font-extrabold tracking-tight">
                        <span class="gradient-text">AI Automation & Data Integration Master</span>
                    </div>
                </div>
                <div class="mt-2 md:mt-0 text-right text-sm text-gray-600">
                    Day 4: Workshop N8N ‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á ‚ö°Ô∏è ‡∏£‡∏∞‡∏ö‡∏ö Automation ‡∏£‡∏∞‡∏î‡∏±‡∏ö Production
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Instructor Information Card (Consistent with Day 2/3) -->
        <div class="bg-white p-6 rounded-xl card-shadow mb-8 border-t-4 border-indigo-500">
            <div class="flex items-center space-x-4">
                <img src="https://profile.line-scdn.net/0h0eGDNw66b0pqPX4GcyERNRptbCBJTDZYT190LFluMi9eCyscRwgpL1g_OHpWCHhIEghzeAhqYnNmLhgsdGuTfm0NMntWCy0aQ14hrA" 
                     onerror="this.onerror=null;this.src='https://placehold.co/80x80/6366f1/ffffff?text=‡∏≠.‡πÅ‡∏ó‡∏ô'"
                     alt="‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÅ‡∏ó‡∏ô ‡∏ò‡∏µ‡∏£‡∏ä‡∏±‡∏¢ ‡πÇ‡∏â‡∏°‡∏ó‡∏±‡∏û" class="w-20 h-20 rounded-full object-cover ring-2 ring-indigo-500">
                <div>
                    <h2 class="text-2xl font-bold text-gray-800">‡∏≠.‡πÅ‡∏ó‡∏ô <span class="text-indigo-600">[‡∏ò‡∏µ‡∏£‡∏ä‡∏±‡∏¢ ‡πÇ‡∏â‡∏°‡∏ó‡∏±‡∏û]</span></h2>
                    <p class="text-base text-gray-500">Head of Digital Transformation</p>
                    <p class="text-sm text-gray-600 mt-1">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà Day 4: ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á **Backend Automation** ‡∏ó‡∏µ‡πà‡∏â‡∏•‡∏≤‡∏î ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢ N8N!</p>
                </div>
            </div>
        </div>

        <!-- Timetable and Checkboxes (Day 4 Content) -->
        <div class="bg-white p-6 rounded-xl card-shadow mb-8">
            <h3 class="text-2xl font-semibold mb-4 gradient-text">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ Day 4 (N8N Advanced Workshop) ‚ö°Ô∏è</h3>
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡πÄ‡∏ß‡∏•‡∏≤</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠/‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</th>
                        <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">09:00 - 10:30 ‡∏ô.</td>
                        <td class="px-6 py-4 text-sm text-gray-800">
                            ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 5.1: Master Webhook: HMAC Security, Data Validation, ‡πÅ‡∏•‡∏∞ Asynchronous Response (202 Accepted)
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center">
                            <input type="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
                        </td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">10:45 - 12:00 ‡∏ô.</td>
                        <td class="px-6 py-4 text-sm text-gray-800">
                            ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 5.2: Resilience Logic: Exponential Backoff (JS Code) ‡πÅ‡∏•‡∏∞ Dead Letter Queue (DLQ) Workflow
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center">
                            <input type="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
                        </td>
                    </tr>
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">13:00 - 14:30 ‡∏ô.</td>
                        <td class="px-6 py-4 text-sm text-gray-800">
                            ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 5.3: Structured AI Agent: JSON Schema Output, Prompt Engineering ‡πÅ‡∏•‡∏∞ AI-Driven Decision Gates
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center">
                            <input type="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
                        </td>
                    </tr>
                     <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">14:45 - 16:00 ‡∏ô.</td>
                        <td class="px-6 py-4 text-sm text-gray-800">
                            ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ 5.4/5.5: Production Flow: State Management (Idempotency) ‡πÅ‡∏•‡∏∞ Active Monitoring/Alerting
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-center">
                            <input type="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500">
                        </td>
                    </tr>
                    <!-- Breaks -->
                     <tr class="bg-gray-50">
                        <td class="px-6 py-2 whitespace-nowrap text-xs text-gray-500 italic">10:30 - 10:45 ‡∏ô.</td>
                        <td class="px-6 py-2 text-xs text-gray-500 italic">‡∏û‡∏±‡∏Å‡πÄ‡∏ö‡∏£‡∏Ñ (Coffee Break)</td>
                        <td class="px-6 py-2 whitespace-nowrap text-center"><input type="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"></td>
                    </tr>
                    <tr class="bg-gray-50">
                        <td class="px-6 py-2 whitespace-nowrap text-xs text-gray-500 italic">12:00 - 13:00 ‡∏ô.</td>
                        <td class="px-6 py-2 text-xs text-gray-500 italic">‡∏û‡∏±‡∏Å‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á (Lunch Break)</td>
                        <td class="px-6 py-2 whitespace-nowrap text-center"><input type="checkbox" class="h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Introduction Card -->
        <div class="bg-white p-6 rounded-xl card-shadow mb-8 highlight-card">
            <div class="flex items-center space-x-3 mb-4 border-b pb-3 border-pink-200">
                <script>document.write(renderIcon('zap', 'w-7 h-7 inline-block text-red-500 mr-2'));</script>
                <h2 class="text-3xl font-bold gradient-text">‡∏ö‡∏ó‡∏ô‡∏≥: N8N ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞‡∏™‡∏°‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á (The Central Brain)</h2>
            </div>
            
            <p class="text-gray-700 leading-relaxed">
                ‡πÉ‡∏ô Day 3 ‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á **Front-End** ‡∏ó‡∏µ‡πà‡∏ó‡∏£‡∏á‡∏û‡∏•‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢ AppSheet ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ **Webhook Action** ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏∞‡∏û‡∏≤‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÉ‡∏ô Day 4 ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏î‡∏≥‡∏î‡∏¥‡πà‡∏á‡∏™‡∏π‡πà **N8N** ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏∞ **Backend Automation Engine** ‡∏ó‡∏µ‡πà‡πÅ‡∏ó‡πâ‡∏à‡∏£‡∏¥‡∏á N8N ‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô **"‡∏™‡∏°‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á"** ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏≤‡∏Å AppSheet ‡∏´‡∏£‡∏∑‡∏≠ Platform ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô (Logic), ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î (Resilience), ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
            </p>
            <p class="text-gray-700 leading-relaxed mt-3">
                ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Flow ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö (Linear) ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô **‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏£‡∏∞‡∏î‡∏±‡∏ö Production (Production-Grade Automation)** ‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ, ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏ù‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏≠‡∏á, ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Data Integrity) ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å Master Developer ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏Ñ‡∏£‡∏±‡∏ö
            </p>
        </div>
        <!-- *************************************************************** -->

        <!-- SECTION 5.1: MASTER WEBHOOK IMPLEMENTATION -->
        <div class="bg-white p-6 rounded-xl card-shadow mt-8">
            <div class="section-header border-blue-500 mb-6">
                <h2 class="text-3xl font-bold gradient-text">
                    <script>document.write(renderIcon('lock', 'w-7 h-7 inline-block text-blue-500 mr-2'));</script>
                    5.1 Master Webhook: HMAC, Validation, ‡πÅ‡∏•‡∏∞ Asynchronous Response
                </h2>
            </div>
            
            <p class="text-gray-700 leading-relaxed mb-4">
                Webhook ‡∏Ñ‡∏∑‡∏≠‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á Flow ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö Webhook ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô 4 ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô: Security, Validation, Idempotency, ‡πÅ‡∏•‡∏∞ Timely Response
            </p>

            <!-- Step 5.1.1: Webhook Security (HMAC) -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('lock', 'w-6 h-6 text-red-600'));</script>
                <span>Step 1: HMAC Verification (‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤)</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                HMAC (Hash-based Message Authentication Code) ‡∏Ñ‡∏∑‡∏≠‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Payload ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏¢‡∏±‡∏á Webhook ‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏≤‡∏à‡∏≤‡∏Å Platform ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á (Tamper-Proof) ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ **Code Node** ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á Webhook Node ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ô‡∏µ‡πâ:
            </p>
            
            <div class="warning-card p-4 rounded-lg my-4">
                <h4 class="font-bold text-orange-800">üí° ‡πÇ‡∏Ñ‡πâ‡∏î JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HMAC Verification ‡πÉ‡∏ô Code Node</h4>
                <p class="text-orange-700 text-sm mt-1">
                    ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤ Platform ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏ä‡πâ Algorithm SHA256 ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á Signature ‡∏°‡∏≤‡πÉ‡∏ô Header ‡∏ä‡∏∑‡πà‡∏≠ <code class="expression-code">X-HMAC-Signature</code>
                </p>
                <pre class="text-sm">
// Code Node: 5.1.1 - HMAC Verification
const crypto = require('crypto');
const items = $input.json;
const SECRET_KEY = $env.WEBHOOK_SECRET; // ‡∏î‡∏∂‡∏á Secret Key ‡∏à‡∏≤‡∏Å Environment Variable (Best Practice)
const VALIDATION_STATUS = [];

for (const item of items) {
    // 1. ‡∏î‡∏∂‡∏á Signature ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡πÉ‡∏ô Header
    const sentSignature = item.headers['x-hmac-signature']; 
    if (!sentSignature) {
        VALIDATION_STATUS.push({ isValid: false, reason: 'HMAC Signature Header Missing' });
        continue;
    }

    // 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Payload Body ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô Raw Body)
    // IMPORTANT: ‡πÉ‡∏ô n8n ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ item.request.body.raw ‡πÅ‡∏ó‡∏ô item.json
    const rawBody = JSON.stringify(item.json); 

    // 3. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì HMAC ‡πÉ‡∏´‡∏°‡πà
    const calculatedHmac = crypto
        .createHmac('sha256', SECRET_KEY)
        .update(rawBody)
        .digest('hex');
        
    // 4. ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö
    const isValid = calculatedHmac === sentSignature;

    if (!isValid) {
        VALIDATION_STATUS.push({ isValid: false, reason: 'HMAC Verification Failed: Signatures Mismatch' });
    } else {
        VALIDATION_STATUS.push({ isValid: true });
    }
}

// ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏™‡πà‡∏á Array ‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Filter Node ‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡πà‡∏≠
return VALIDATION_STATUS;
                </pre>
                <p class="text-orange-700 text-sm mt-2">
                    **Master Tip:** ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Environment Variable (<code class="expression-code">$env.WEBHOOK_SECRET</code>) ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£ Hardcode ‡∏Ñ‡πà‡∏≤ Secret Key ‡πÉ‡∏ô Flow ‡∏Ñ‡∏∑‡∏≠‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
                </p>
            </div>
            
            <!-- Step 5.1.5: Data Validation (NEW EXPANSION) -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('alert-triangle', 'w-6 h-6 text-orange-600'));</script>
                <span>Step 2: Data Validation: ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á Payload ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                ‡πÅ‡∏°‡πâ‡∏ß‡πà‡∏≤ Webhook ‡∏à‡∏∞‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÅ‡∏ï‡πà Payload ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≤‡∏î‡∏´‡∏≤‡∏¢ (Missing Fields) ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô (Wrong Data Type) ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ **Code Node** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Logic ‡∏´‡∏•‡∏±‡∏Å ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Flow ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏≤‡∏á
            </p>
            
            <div class="highlight-card p-4 rounded-lg my-4">
                <h4 class="font-bold text-pink-800">üí° ‡πÇ‡∏Ñ‡πâ‡∏î JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Data Validation (Required Fields)</h4>
                <p class="text-pink-700 text-sm mt-1">
                    ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Payload ‡∏°‡∏µ `transaction_id` ‡πÅ‡∏•‡∏∞ `customer_data.email` ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á:
                </p>
                <pre class="text-sm">
// Code Node: 5.1.2 - Data Validation
const items = $input.json;
const validItems = [];
const invalidItems = [];

for (const item of items) {
    const data = item.json;
    const errors = [];
    
    // Check 1: Transaction ID must be present
    if (!data.transaction_id || data.transaction_id.trim() === '') {
        errors.push("Missing or Empty 'transaction_id'");
    }
    
    // Check 2: Customer Email must be a valid string
    if (!data.customer_data || typeof data.customer_data.email !== 'string' || data.customer_data.email.indexOf('@') === -1) {
        errors.push("Invalid or Missing 'customer_data.email'");
    }
    
    // Check 3: Order Amount must be a number
    if (typeof data.order_data.total_amount !== 'number' || data.order_data.total_amount <= 0) {
        errors.push("Invalid 'order_data.total_amount'. Must be a positive number.");
    }
    
    if (errors.length > 0) {
        // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ Error ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á Error Log
        item.json.validationErrors = errors;
        invalidItems.push(item);
    } else {
        validItems.push(item);
    }
}

// **‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:** ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á Output ‡πÄ‡∏õ‡πá‡∏ô 2 Sets (Index 0: Valid, Index 1: Invalid)
return [validItems, invalidItems]; 
                </pre>
                <p class="text-pink-700 text-sm mt-2">
                    **Master Tip:** ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å Code Node ‡∏ô‡∏µ‡πâ ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ **Split In Batches Node** ‡∏´‡∏£‡∏∑‡∏≠ **Merge Node** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å Output Index 0 (Valid) ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Logic ‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏•‡∏∞ Index 1 (Invalid) ‡πÑ‡∏õ‡∏¢‡∏±‡∏á **DLQ/Error Log** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ Flow ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞
                </p>
            </div>


            <!-- Step 5.1.3: Idempotency and Transaction ID (Preventing Duplicates) -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('database', 'w-6 h-6 text-purple-600'));</script>
                <span>Step 3: Idempotency Check ‡πÅ‡∏•‡∏∞ Transaction ID</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                Webhook ‡∏´‡∏•‡∏≤‡∏¢ Platform ‡∏°‡∏µ‡∏Å‡∏•‡πÑ‡∏Å Retry ‡∏ã‡πâ‡∏≥ ‡πÜ (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ HTTP 500) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î **Duplicate Runs** ‡πÑ‡∏î‡πâ N8N ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏•‡πÑ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ **Idempotency** ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Transaction ID ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (‡πÄ‡∏ä‡πà‡∏ô Order ID) ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á UUID ‡πÉ‡∏´‡∏°‡πà
            </p>
            <div class="highlight-card p-4 rounded-lg my-4">
                <h4 class="font-bold text-pink-800">üõ†Ô∏è ‡∏Å‡∏•‡πÑ‡∏Å Idempotency (‡πÉ‡∏ä‡πâ Google Sheets/Redis)</h4>
                <ol class="list-decimal list-inside ml-4 mt-2 space-y-1 text-pink-700">
                    <li>**Set Node:** ‡∏î‡∏∂‡∏á Transaction ID ‡∏à‡∏≤‡∏Å Payload (‡πÄ‡∏ä‡πà‡∏ô <code class="expression-code">{{ $json.transaction_id }}</code>)</li>
                    <li>**Google Sheets/Redis Node (Read):** ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Transaction ID ‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á **`Processed_IDs`**</li>
                    <li>**If Node:**
                        <ul class="list-disc list-inside ml-4 mt-1">
                            <li>**Condition:** <code class="expression-code">{{ $node["Google Sheets"].json["length"] }} > 0</code> (‡∏ñ‡πâ‡∏≤‡∏û‡∏ö ID ‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß)</li>
                            <li>**True Path:** **Stop Node** (‡∏´‡∏¢‡∏∏‡∏î Flow ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á HTTP 200 ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ)</li>
                            <li>**False Path:** ‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡πà Logic ‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Transaction ID ‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á `Processed_IDs` ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <!-- Step 5.1.4: Asynchronous Response (202 Accepted) -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('zap', 'w-6 h-6 text-green-600'));</script>
                <span>Step 4: Asynchronous Response (HTTP 202) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Flow ‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å Flow ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏°‡∏µ AI, Backoff, ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏≤‡∏¢ Node ‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏ß‡πà‡∏≤ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (Timeout ‡∏Ç‡∏≠‡∏á Platform ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á) ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö Webhook ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏î‡πâ‡∏ß‡∏¢ Code <code class="expression-code">202 Accepted</code>
            </p>
            <p class="mt-3 text-gray-700 leading-relaxed">
                **‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ:** ‡πÉ‡∏ä‡πâ **Webhook Response Node** ‡πÄ‡∏õ‡πá‡∏ô Node ‡∏ó‡∏µ‡πà 2 ‡πÉ‡∏ô Flow (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ Validation ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô) ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ **Status Code** ‡πÄ‡∏õ‡πá‡∏ô <code class="expression-code">202 Accepted</code> ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÉ‡∏´‡πâ Flow ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á (Asynchronous Process) ‡πÇ‡∏î‡∏¢‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ **Queue Node** ‡∏´‡∏£‡∏∑‡∏≠ **Split in Batches Node** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô
            </p>
            <pre class="text-sm">
// ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Flow Asynchronous (Master Flow)
Webhook Trigger &rarr; Code Node (HMAC/Validation) &rarr; Webhook Response Node (Status 202) &rarr; *Flow Logic ‡∏´‡∏•‡∏±‡∏Å*
            </pre>
        </div>

        <!-- *************************************************************** -->
        <!-- SECTION 5.2: RESILIENCE LOGIC AND DLQ -->
        <div class="bg-white p-6 rounded-xl card-shadow mt-8">
            <div class="section-header border-blue-500 mb-6">
                <h2 class="text-3xl font-bold gradient-text">
                    <script>document.write(renderIcon('repeat', 'w-7 h-7 inline-block text-blue-500 mr-2'));</script>
                    5.2 Resilience Logic: Exponential Backoff ‡πÅ‡∏•‡∏∞ Dead Letter Queue (DLQ)
                </h2>
            </div>
            
            <p class="text-gray-700 leading-relaxed mb-4">
                Flow ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÄ‡∏û‡∏£‡∏≤‡∏∞ API ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏•‡πà‡∏°‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏•‡πÑ‡∏Å Retry ‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞ (Exponential Backoff) ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏±‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏ñ‡∏≤‡∏ß‡∏£ (DLQ) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠
            </p>

            <!-- Step 5.2.1: Exponential Backoff Implementation -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('repeat', 'w-6 h-6 text-yellow-600'));</script>
                <span>Step 5: ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥ Exponential Backoff ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Catch Block (‡∏î‡πâ‡∏ß‡∏¢ Code Node)</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ **Try/Catch Block** ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö **Code Node** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ Retry ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢ ‡πÜ (Exponential) ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ **Branching** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á Retry ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å DLQ
            </p>
            
            <pre class="text-sm">
// Code Node: 5.2.1 - Exponential Backoff Logic
const MAX_RETRIES = 5; 
const BASE_DELAY_MS = 2000; // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (2000ms)

for (const item of $input.json) {
    // ‡∏î‡∏∂‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á Item
    const currentAttempt = item.json.retryAttempt || 0;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
    if (currentAttempt >= MAX_RETRIES) {
        item.json.status = 'FAILED_DLQ';
        item.json.errorDetail = item.error?.message || 'Max retries exceeded.';
        item.json.timestamp = new Date().toISOString();
        item.json.sendToDLQ = true; // Flag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ DLQ
    } else {
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏á: 2^n * Base Delay
        const calculatedDelay = Math.pow(2, currentAttempt) * BASE_DELAY_MS;
        const delay = Math.min(calculatedDelay, 300000); // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà 5 ‡∏ô‡∏≤‡∏ó‡∏µ (300,000ms)
        
        item.json.retryAttempt = currentAttempt + 1;
        item.json.backoffDelay = delay;
        item.json.status = 'PENDING_RETRY';
        item.json.sendToDLQ = false;
    }
}

return $input.json;

// #######################################################################
            </pre>
            
            <h4 class="text-xl font-medium mt-6 text-indigo-700">‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Flow Resilience (Try/Catch/Retry/DLQ)</h4>
            <div class="flex flex-col items-center justify-center p-6 bg-gray-100 rounded-xl my-4 card-shadow space-y-3">
                <div class="flow-node bg-blue-200 text-blue-800 font-bold">1. Try Block Start</div>
                <div class="arrow text-3xl font-bold">&darr;</div>
                <div class="flow-node bg-yellow-100 text-yellow-800">API Call (HTTP Request Node)</div>
                <div class="flex justify-between w-full max-w-sm">
                    <div class="arrow text-xl font-bold text-green-500">Success &darr; (End Flow)</div>
                    <div class="arrow text-xl font-bold text-red-500">Fail &darr; (To Catch Block)</div>
                </div>
                <div class="flow-node bg-red-100 text-red-800 font-bold">2. Catch Block Start</div>
                <div class="arrow text-3xl font-bold">&darr;</div>
                <div class="flow-node bg-purple-100 text-purple-800">Code Node (5.2.1 Backoff Logic)</div>
                <div class="arrow text-3xl font-bold">&darr;</div>
                <div class="flow-node bg-indigo-100 text-indigo-800 font-semibold">3. If Node (Check: sendToDLQ == true)</div>
                
                <div class="flex justify-between w-full max-w-lg mt-2">
                    <div class="flex flex-col items-center">
                        <div class="arrow text-xl font-bold text-green-500">False (Retry) &darr;</div>
                        <div class="flow-node bg-green-50 text-green-700 text-sm">Wait Node (Delay: <code class="expression-code">{{ $json.backoffDelay }}</code>)</div>
                        <div class="arrow text-xl font-bold text-green-500">Go To Node &rarr; Try Block Start (Loop)</div>
                    </div>
                    <div class="flex flex-col items-center">
                        <div class="arrow text-xl font-bold text-red-500">True (DLQ) &darr;</div>
                        <div class="flow-node bg-red-50 text-red-700 text-sm">HTTP Request Node &rarr; DLQ Webhook</div>
                        <div class="arrow text-xl font-bold text-red-500">End Flow</div>
                    </div>
                </div>
            </div>

            <!-- Step 5.2.2: Dead Letter Queue (DLQ) Workflow -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('shield-alert', 'w-6 h-6 text-red-600'));</script>
                <span>Step 6: Dead Letter Queue (DLQ) Workflow ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£ Re-queue</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                DLQ ‡∏Ñ‡∏∑‡∏≠ Flow ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏£‡∏±‡∏ö ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏ñ‡∏≤‡∏ß‡∏£ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠ (Manual Intervention) ‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Flow ‡∏´‡∏•‡∏±‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (Re-queue)
            </p>
            <h4 class="text-xl font-medium mt-6 text-indigo-700">‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á DLQ Workflow</h4>
            <ol class="list-decimal list-inside ml-4 mt-2 space-y-1 text-gray-700">
                <li>**Webhook Trigger:** ‡∏£‡∏±‡∏ö Payload ‡∏ó‡∏µ‡πà‡∏°‡∏µ `sendToDLQ: true` ‡∏à‡∏≤‡∏Å Flow ‡∏´‡∏•‡∏±‡∏Å</li>
                <li>**Set Node:** ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Log ‡πÇ‡∏î‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏° `Flow_Name`, `Manual_Status: Pending Review`</li>
                <li>**Google Sheets/DB Node:** ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Payload ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á **`DLQ_Error_Log`**</li>
                <li>**Notification Node:** ‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö **Critical Alert** ‡∏ú‡πà‡∏≤‡∏ô Line/Slack/Email ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏ô‡∏ö Transaction ID</li>
            </ol>
            
            <h4 class="text-xl font-medium mt-6 text-indigo-700">‡∏Å‡∏•‡πÑ‡∏Å Re-queue (‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö)</h4>
            <p class="mt-2 text-gray-700 leading-relaxed">
                ‡∏Å‡∏•‡πÑ‡∏Å‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô Flow ‡πÅ‡∏¢‡∏Å‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Scheduled) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô DLQ Log:
            </p>
            <pre class="text-sm">
// ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Flow Re-queue
Cron/Interval Node (‡∏ó‡∏∏‡∏Å 30 ‡∏ô‡∏≤‡∏ó‡∏µ) &rarr; Google Sheets (Read: Where Status == 'Ready to Requeue') &rarr; 
Code Node (JSON.parse(Original_Payload)) &rarr; HTTP Request Node (Target: Webhook Flow ‡∏´‡∏•‡∏±‡∏Å) &rarr; 
Google Sheets (Update Status to 'Requeued')
            </pre>
            
            <div class="highlight-card p-4 rounded-lg my-4">
                <h4 class="font-bold text-pink-800">üí° ‡πÇ‡∏Ñ‡πâ‡∏î JavaScript ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö JSON Parse (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Re-queue)</h4>
                <p class="text-pink-700 text-sm mt-1">
                    ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏î‡∏∂‡∏á `Original_Payload` ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô JSON String ‡∏à‡∏≤‡∏Å Google Sheets/DB ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô JSON Object ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏¥‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Flow ‡∏´‡∏•‡∏±‡∏Å:
                </p>
                <pre class="text-sm">
// Code Node: 5.2.2 - Parsing Original Payload (Re-queue Flow)
const items = $input.json;
const payloadToRequeue = [];

for (const item of items) {
    const originalPayloadString = item.json.Original_Payload_JSON; 
    
    try {
        // **Critical Step:** ‡πÅ‡∏õ‡∏•‡∏á JSON String ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô Object
        const parsedPayload = JSON.parse(originalPayloadString);
        
        // ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á Payload ‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ metadata ‡∏Ç‡∏≠‡∏á DLQ ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Flow ‡∏´‡∏•‡∏±‡∏Å
        payloadToRequeue.push({ json: parsedPayload }); 
        
    } catch (e) {
        console.error(`Error parsing payload for re-queue: ${e.message}`);
        // ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ Logic ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤ JSON Parse ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
    }
}

return payloadToRequeue; // ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å Payload ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏¢‡∏¥‡∏á Webhook
                </pre>
            </div>
        </div>

        <!-- *************************************************************** -->
        <!-- SECTION 5.3: STRUCTURED AI AGENT INTEGRATION (EXPANDED) -->
        <div class="bg-white p-6 rounded-xl card-shadow mt-8">
            <div class="section-header border-blue-500 mb-6">
                <h2 class="text-3xl font-bold gradient-text">
                    <script>document.write(renderIcon('cpu', 'w-7 h-7 inline-block text-blue-500 mr-2'));</script>
                    5.3 Structured AI Agent: JSON Schema Output ‡πÅ‡∏•‡∏∞ Decision Gates (‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)
                </h2>
            </div>
            <p class="text-gray-700 leading-relaxed mb-4">
                ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô N8N ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à (JSON Schema) ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ï‡πà‡∏≠‡πÉ‡∏ô Flow
            </p>

            <!-- Step 5.3.1: Data Pre-processing -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('code', 'w-6 h-6 text-yellow-600'));</script>
                <span>Step 7: Data Pre-processing: ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ AI</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤ LLM Node ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ **Code Node** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á (Null), ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ (Normalization) ‡∏î‡∏±‡∏á‡πÄ‡∏ä‡πà‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô String ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏ô‡πà‡∏ß‡∏¢
            </p>
            
            <pre class="text-sm">
// Code Node: 5.3.1 - Data Pre-processing for LLM
const items = $input.json;
const currency = "‡∏ö‡∏≤‡∏ó";

for (const item of items) {
    const rawRevenue = item.json.order_data.total_amount;
    let formattedRevenue;
    
    if (rawRevenue && typeof rawRevenue === 'number' && rawRevenue > 1000000) {
        // ‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏´‡∏•‡∏±‡∏Å‡∏•‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
        formattedRevenue = `${(rawRevenue / 1000000).toFixed(1)} ‡∏•‡πâ‡∏≤‡∏ô${currency}`;
    } else if (rawRevenue) {
        formattedRevenue = `${rawRevenue.toLocaleString()} ${currency}`;
    } else {
        formattedRevenue = `‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏`;
    }

    // ‡πÄ‡∏û‡∏¥‡πà‡∏° Field ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Prompt
    item.json.llm_input_data = {
        customer_name: item.json.customer_data.name || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏',
        order_amount_text: formattedRevenue,
        order_status: item.json.order_data.status
    };
}
return items;
            </pre>

            <!-- Step 5.3.2: Example 1: Order Triage and Prioritization (Original) -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('cpu', 'w-6 h-6 text-green-600'));</script>
                <span>Step 8: ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 1: Order Triage ‡∏î‡πâ‡∏ß‡∏¢ JSON Schema Output</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                **‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÇ‡∏î‡∏¢ AI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô If Node
            </p>
            
            <pre class="text-sm">
// System Prompt: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÅ‡∏•‡∏∞‡∏Å‡∏é‡πÄ‡∏Å‡∏ì‡∏ë‡πå (MUST FOLLOW)
"‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (Order Triage Agent) ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"

// JSON Schema (‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô)
{
  "type": "object",
  "properties": {
    "priority": { "type": "string", "enum": ["CRITICAL", "HIGH", "MEDIUM", "LOW"] },
    "risk_score": { "type": "number", "description": "‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á 1-100" },
    "is_escalated": { "type": "boolean" },
    "reasoning": { "type": "string" }
  },
  "required": ["priority", "risk_score"]
}

// If Node Condition (Decision Gate)
Condition 1: <code class="expression-code">{{ $node["LLM Node"].json["priority"] }}</code> equals <code class="expression-code">CRITICAL</code> &rarr; ‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏° Sales ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
Condition 2: <code class="expression-code">{{ $node["LLM Node"].json["risk_score"] }}</code> is greater than <code class="expression-code">80</code> &rarr; ‡∏™‡πà‡∏á Alert ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Line/Slack
            </pre>
            
            <!-- Step 5.3.3: Example 2: Product Categorization and Tagging (NEW EXPANSION) -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('cpu', 'w-6 h-6 text-green-600'));</script>
                <span>Step 9: ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 2: Product Categorization ‡πÅ‡∏•‡∏∞ Tagging (Multi-Dimensional Output)</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                **‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏à‡∏±‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Tag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SEO/Inventory ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≥‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Long Description)
            </p>
            
            <pre class="text-sm">
// System Prompt: ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ AI ‡πÄ‡∏õ‡πá‡∏ô Content Manager
"‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Catalog Manager) ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏≥‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏•‡∏±‡∏Å, ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡πà‡∏≠‡∏¢, ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á 3-5 keywords ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SEO"

// User Prompt Template (‡πÉ‡∏ä‡πâ Long Product Description)
"‡πÇ‡∏õ‡∏£‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡∏≥‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô JSON Array (‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£):
{{ $json.product_data.long_description }}"

// JSON Schema (‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô Array ‡∏Ç‡∏≠‡∏á Object)
{
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "product_id": { "type": "string" },
      "category_main": { "type": "string", "enum": ["Electronics", "Apparel", "Home Goods", "Other"] },
      "category_sub": { "type": "string" },
      "keywords_list": { "type": "array", "items": { "type": "string" } },
      "is_seasonal": { "type": "boolean" }
    },
    "required": ["product_id", "category_main", "keywords_list"]
  }
}
            </pre>
            
            <h4 class="text-xl font-medium mt-6 text-indigo-700">‡∏Å‡∏≤‡∏£‡∏ô‡∏≥ Array Output ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Flow ‡∏ï‡πà‡∏≠‡πÑ‡∏õ</h4>
            <p class="mt-2 text-gray-700 leading-relaxed">
                ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å AI ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô **Array** ‡∏Ç‡∏≠‡∏á Object ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á Output ‡∏ô‡∏µ‡πâ‡∏ï‡∏£‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Node ‡πÄ‡∏ä‡πà‡∏ô **Split In Batches Node** ‡∏´‡∏£‡∏∑‡∏≠ **Item Lists Node** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏ô‡∏•‡∏π‡∏õ (Loop) ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏µ‡∏Å
            </p>
        </div>

        <!-- *************************************************************** -->
        <!-- SECTION 5.6: ADVANCED DATA TRANSFORMATION (NEW EXPANSION) -->
        <div class="bg-white p-6 rounded-xl card-shadow mt-8">
            <div class="section-header border-blue-500 mb-6">
                <h2 class="text-3xl font-bold gradient-text">
                    <script>document.write(renderIcon('code', 'w-7 h-7 inline-block text-blue-500 mr-2'));</script>
                    5.6 Advanced Data Transformation: JSDO ‡πÅ‡∏•‡∏∞ Item Manipulation
                </h2>
            </div>
            <p class="text-gray-700 leading-relaxed mb-4">
                ‡πÉ‡∏ô Flow ‡∏£‡∏∞‡∏î‡∏±‡∏ö Master ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ú‡∏ä‡∏¥‡∏ç‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏õ‡∏•‡∏Å ‡πÜ (‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏±‡πâ‡∏ô) ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ Node ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á **Code Node** ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏ô‡∏µ‡πâ
            </p>
            
            <!-- Step 5.6.1: Flattening Nested JSON -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('database', 'w-6 h-6 text-yellow-600'));</script>
                <span>Step 10: Flattening Nested JSON (‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô)</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                API ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô (Nested Data) ‡∏ã‡∏∂‡πà‡∏á‡∏¢‡∏≤‡∏Å‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£ Map ‡πÉ‡∏ô Node ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ JS ‡πÄ‡∏û‡∏∑‡πà‡∏≠ **Flatten** ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô Object ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (Single Level)
            </p>
            <pre class="text-sm">
// Code Node: 5.6.1 - Flatten Customer Data
const items = $input.json;

for (const item of items) {
    const original = item.json;
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô
    const customer = original.data.customer_info || {};
    const address = customer.billing_address || {};
    
    // Flattening (‡∏™‡∏£‡πâ‡∏≤‡∏á Object ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏°‡∏µ Field ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
    item.json = {
        transaction_id: original.transaction_id,
        // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà 3
        customer_name: customer.full_name,
        customer_email: customer.email,
        
        // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà 4
        billing_city: address.city,
        billing_zip: address.zip_code,

        // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏¥‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô case ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
        _original_payload: original
    };
}
return items;
            </pre>

            <!-- Step 5.6.2: Merging Multiple Inputs (JSDO) -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('git-branch', 'w-6 h-6 text-green-600'));</script>
                <span>Step 11: Merging Multiple Inputs (‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ Node)</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÉ‡∏ä‡πâ **Merge Node** ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ Code Node ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ Node ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏ï‡∏£‡∏£‡∏Å‡∏∞ ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ <code class="expression-code">$item(index)</code>
            </p>
            <pre class="text-sm">
// Code Node: 5.6.2 - Merging Data (‡∏´‡∏•‡∏±‡∏á Merge Node)
// ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ß‡πà‡∏≤ Input 0 ‡∏Ñ‡∏∑‡∏≠ Customer Data, Input 1 ‡∏Ñ‡∏∑‡∏≠ Order Details
const items = $input.item; // ‡πÉ‡∏ô n8n $input.item ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏±‡∏á Merge Node

const customerData = items[0].json; 
const orderDetails = items[1].json;

const mergedOutput = {
    // ‡∏£‡∏ß‡∏° Field ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
    transaction_id: orderDetails.transaction_id,
    customer_id: customerData.id,
    customer_name: customerData.full_name,
    
    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Field ‡πÉ‡∏´‡∏°‡πà
    total_amount: orderDetails.amount,
    date_processed: new Date().toISOString()
};

return [{ json: mergedOutput }];
            </pre>

            <!-- Step 5.6.3: Complex Looping and Batching -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('repeat', 'w-6 h-6 text-purple-600'));</script>
                <span>Step 12: ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Item List ‡∏à‡∏≤‡∏Å Array ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Payload</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                ‡∏´‡∏≤‡∏Å Webhook ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Line Items) ‡∏°‡∏≤‡πÉ‡∏ô Payload ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞ Line Item ‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô 1 Item ‡πÉ‡∏ô N8N ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Node ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡πÄ‡∏ä‡πà‡∏ô Google Sheets Node) ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡∏á‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (Batching/Loop Preparation)
            </p>
            <pre class="text-sm">
// Code Node: 5.6.3 - Splitting Line Items
const items = $input.json;
const lineItems = [];

for (const item of items) {
    const orderId = item.json.transaction_id;
    const itemsArray = item.json.order_data.line_items || [];
    
    for (const lineItem of itemsArray) {
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á Item ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ Line Item
        lineItems.push({ 
            json: {
                parent_order_id: orderId,
                product_sku: lineItem.sku,
                quantity: lineItem.qty,
                price_per_unit: lineItem.price
            }
        });
    }
}

// ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô 1 Input Item (Order) ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏≤‡∏¢ Output Items (Line Items)
return lineItems;
            </pre>
        </div>
        
        <!-- *************************************************************** -->
        <!-- SECTION 5.4: PRODUCTION-GRADE LOGIC & STATE MANAGEMENT -->
        <div class="bg-white p-6 rounded-xl card-shadow mt-8">
            <div class="section-header border-blue-500 mb-6">
                <h2 class="text-3xl font-bold gradient-text">
                    <script>document.write(renderIcon('database', 'w-7 h-7 inline-block text-blue-500 mr-2'));</script>
                    5.4 Production Flow: State Management ‡πÅ‡∏•‡∏∞ Multi-Step Idempotency
                </h2>
            </div>
            <p class="text-gray-700 leading-relaxed mb-4">
                Flow ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô CRM, ‡∏™‡∏£‡πâ‡∏≤‡∏á Invoice, ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•) ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß (State Management) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏´‡∏≤‡∏Å Flow ‡∏ñ‡∏π‡∏Å‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏Å‡∏©‡∏≤ Idempotency ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ Step
            </p>

            <!-- Step 5.4.1: State Management with Redis/Google Sheets -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('database', 'w-6 h-6 text-purple-600'));</script>
                <span>Step 13: ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (State Management) ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Node</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Flow ‡∏£‡∏±‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô Node ‡∏´‡∏ô‡∏∂‡πà‡∏á ‡πÜ ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á Step ‡∏ô‡∏±‡πâ‡∏ô‡∏•‡∏á‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß (‡πÄ‡∏ä‡πà‡∏ô Redis ‡∏´‡∏£‡∏∑‡∏≠ Google Sheets) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡πÉ‡∏ô Step ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
            </p>
            <h4 class="text-xl font-medium mt-6 text-indigo-700">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô</h4>
            <ol class="list-decimal list-inside ml-4 mt-2 space-y-1 text-gray-700">
                <li>**Step 1: Check:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô DB/Redis ‡∏ß‡πà‡∏≤ `CustomerID: [ID]` ‡∏°‡∏µ Field `CRM_Created: true` ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á</li>
                <li>**Step 2: Create Customer (True Path):** ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô CRM</li>
                <li>**Step 3: Update State:** ‡πÉ‡∏ä‡πâ **Redis Node** (‡∏´‡∏£‡∏∑‡∏≠ Google Sheets Node) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:
                    <pre class="text-sm">
// Redis Node: Set Key-Value
Key: <code class="expression-code">customer_state:{{ $json.customer_data.id }}</code>
Value: <code class="expression-code">{"CRM_Created": true, "Invoice_Generated": false, "Timestamp": "{{ NOW() }}"}</code>
                    </pre>
                </li>
                <li>**Step 4: Check Invoice:** ‡πÉ‡∏ô Step ‡∏ï‡πà‡∏≠‡πÑ‡∏õ (‡∏™‡∏£‡πâ‡∏≤‡∏á Invoice) ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `Invoice_Generated` ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô `false` ‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠</li>
            </ol>
            <p class="text-gray-700 leading-relaxed mt-3">
                ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Flow ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡∏ã‡πâ‡∏≥ ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞ Action ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (True Idempotency)
            </p>

            <!-- Step 5.4.2: Execution Hooks and Error Handling -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('alert-triangle', 'w-6 h-6 text-red-600'));</script>
                <span>Step 14: ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Execution Hooks ‡πÅ‡∏•‡∏∞ Catch-All Error Handler</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                N8N ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î **Error Workflow** ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Error ‡∏ó‡∏µ‡πà Node ‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡∏à‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ (Uncaught Error)
            </p>
            <ol class="list-decimal list-inside ml-4 mt-2 space-y-1 text-gray-700">
                <li>**‡∏™‡∏£‡πâ‡∏≤‡∏á Error Workflow:** Flow ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ **Error Trigger Node**</li>
                <li>**‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Error Flow:** Flow ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Error (‡πÄ‡∏ä‡πà‡∏ô `error.message`, `error.nodeName`) ‡∏à‡∏≤‡∏Å Flow ‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
                <li>**Logging:** ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Error Log ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏•‡∏á‡πÉ‡∏ô DB/Sheets (‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢ DLQ)</li>
                <li>**Notification:** ‡∏™‡πà‡∏á Critical Alert ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</li>
                <li>**Setting:** ‡πÉ‡∏ô Flow ‡∏´‡∏•‡∏±‡∏Å ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Workflow Settings > Error Handling** ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á Uncaught Error ‡πÑ‡∏õ‡∏¢‡∏±‡∏á **Error Workflow** ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ</li>
            </ol>
            <p class="text-gray-700 leading-relaxed mt-3">
                ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ **Global Safety Net** ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ Flow Production ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏´‡∏≤‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏Ñ‡∏¥‡∏î
            </p>
        </div>
        
        <!-- *************************************************************** -->
        <!-- SECTION 5.5: MONITORING AND HEALTH CHECK -->
        <div class="bg-white p-6 rounded-xl card-shadow mt-8">
            <div class="section-header border-blue-500 mb-6">
                <h2 class="text-3xl font-bold gradient-text">
                    <script>document.write(renderIcon('activity', 'w-7 h-7 inline-block text-blue-500 mr-2'));</script>
                    5.5 Monitoring, Health Check, ‡πÅ‡∏•‡∏∞ API Credential Management
                </h2>
            </div>
            <p class="text-gray-700 leading-relaxed mb-4">
                Automation Engine ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (Active Monitoring) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏ó‡∏£‡∏≤‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏∞‡∏£‡∏π‡πâ
            </p>

            <!-- Step 5.5.1: Active Health Check -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('bell', 'w-6 h-6 text-yellow-600'));</script>
                <span>Step 15: Active Health Check (‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å)</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                Flow ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Cron/Interval Node) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (‡πÄ‡∏ä‡πà‡∏ô CRM, Payment Gateway) ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ API Call ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô ‡∏î‡∏∂‡∏á Record 1 ‡πÅ‡∏ñ‡∏ß)
            </p>
            <pre class="text-sm">
// ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á Flow Health Check
Cron Node (‡∏ó‡∏∏‡∏Å 60 ‡∏ô‡∏≤‡∏ó‡∏µ) &rarr; HTTP Request Node (GET /api/v1/health) &rarr; 
If Node (Check: Status Code == 200) 
    &rarr; True: Log Success (Google Sheets/DB)
    &rarr; False: Email/Line Critical Alert (API Is Down)
            </pre>
            
            <!-- Step 5.5.2: API Credential Rotation -->
            <h3 class="text-2xl font-semibold mt-6 text-gray-800 flex items-center space-x-2 border-b pb-2">
                <script>document.write(renderIcon('key', 'w-6 h-6 text-red-600'));</script>
                <span>Step 16: ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ API Credential ‡πÅ‡∏•‡∏∞ Rotation</span>
            </h3>
            <p class="mt-3 text-gray-700 leading-relaxed">
                Credential ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö N8N ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ **Environment Variable** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö API Key ‡πÑ‡∏î‡πâ ‡∏ã‡∏∂‡πà‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Key ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Flow ‡πÄ‡∏•‡∏¢
            </p>
            <div class="warning-card p-4 rounded-lg my-4">
                <h4 class="font-bold text-orange-800">Master Practice: Hardcode vs. Environment Variable</h4>
                <ul class="list-disc list-inside ml-4 mt-2 space-y-1 text-orange-700">
                    <li>**‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£** Hardcode API Key ‡πÉ‡∏ô Credential Node ‡∏´‡∏£‡∏∑‡∏≠ Code Node</li>
                    <li>**‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ** <code class="expression-code">${{ $env.CRM_API_KEY }}</code> ‡πÉ‡∏ô Credential Settings</li>
                    <li>**Rotation:** ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Key ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏ó‡∏µ‡∏° DevOps/IT ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå Environment (.env) ‡∏Ç‡∏≠‡∏á N8N ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î N8N UI</li>
                </ul>
            </div>
        </div>

        <!-- *************************************************************** -->
        <!-- FINAL CHECKLIST & CONCLUSION -->
        <!-- *************************************************************** -->
        <hr class="my-6 border-t border-gray-200">

        <!-- ‡∏ö‡∏ó‡∏™‡∏£‡∏∏‡∏õ Day 4 (Updated Checklist) -->
        <div class="bg-white p-6 rounded-xl card-shadow mt-8">
            <div class="section-header border-green-500">
                <h2 class="text-3xl font-bold" style="color: #10b981;">
                    <i class="fas fa-check-circle text-green-500 mr-2"></i>
                    ‡∏™‡∏£‡∏∏‡∏õ Day 4: N8N Master Checklist (‡∏â‡∏ö‡∏±‡∏ö‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå)
                </h2>
            </div>
            
            <div class="mt-4 p-6 bg-green-50 rounded-xl card-shadow">
                <p class="text-green-800 font-semibold mb-3">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô Workshop ‡∏ô‡∏µ‡πâ ‡∏ó‡πà‡∏≤‡∏ô‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:</p>
                <ul class="list-disc list-inside space-y-3 text-gray-700 ml-4">
                    <li>‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ **Webhook Trigger** ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢ **HMAC Verification** (‡∏î‡πâ‡∏ß‡∏¢ Code Node)</li>
                    <li>‚úÖ ‡πÉ‡∏ä‡πâ **Data Validation** (Code Node) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á Payload ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á</li>
                    <li>‚úÖ ‡πÉ‡∏ä‡πâ‡∏Å‡∏•‡πÑ‡∏Å **Idempotency Check** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô Flow ‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏à‡∏≤‡∏Å Webhook Retry</li>
                    <li>‚úÖ ‡∏™‡πà‡∏á **Asynchronous Response (HTTP 202)** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Timeout ‡πÉ‡∏ô Flow ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô</li>
                    <li>‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á **Resilience Logic** ‡∏î‡πâ‡∏ß‡∏¢ **Exponential Backoff Algorithm** (JS Code) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Retry ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß</li>
                    <li>‚úÖ ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö **Dead Letter Queue (DLQ) Workflow** ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡πÑ‡∏Å **Re-queue** ‡∏î‡πâ‡∏ß‡∏¢ Google Sheets/DB</li>
                    <li>‚úÖ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î **Structured AI Agent** ‡∏î‡πâ‡∏ß‡∏¢ **JSON Schema Output** (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 2 ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Decision Gate ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</li>
                    <li>‚úÖ ‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ **Advanced Data Transformation** (Flattening, Merging, Looping) ‡∏î‡πâ‡∏ß‡∏¢ Code Node</li>
                    <li>‚úÖ ‡∏ô‡∏≥ **State Management** ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Flow ‡∏´‡∏•‡∏≤‡∏¢‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤ True Idempotency ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ Step</li>
                    <li>‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á **Global Error Workflow** (Execution Hook) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏ö Error ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏Ñ‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
                    <li>‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ **Active Health Check** ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ **API Credential** ‡∏î‡πâ‡∏ß‡∏¢ Environment Variables</li>
                </ul>
            </div>
        </div>
        
    </main>

    <!-- Footer Section (Consistent with Day 2/3 - Tailwind Structure) -->
    <footer class="bg-gray-800 text-white py-6 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2025 AI Automation & Data Integration Master. | ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô‡πÇ‡∏î‡∏¢ ‡∏≠.‡πÅ‡∏ó‡∏ô [‡∏ò‡∏µ‡∏£‡∏ä‡∏±‡∏¢ ‡πÇ‡∏â‡∏°‡∏ó‡∏±‡∏û]</p>
            <p class="text-sm text-gray-400 mt-1">Head of Digital Transformation</p>
        </div>
    </footer>

</body>
</html>
